<!DOCTYPE html>
<html class="full" lang="en">
<!-- Make sure the <html> tag is set to the .full CSS class. Change the background image in the full.css file. -->

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Battle Contract</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/full.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div class="jumbotron">
      <!--   <div class="row" style="display:none">

            <div class="col-md-1 text-right"><img src="img/battle/PRS_Badge.png"></div>
            <div class="col-md-2  text-center">
                <h2>Persian Token</h2><button type="button" class="btn btn-success">Send</button></div>
            <div class="col-md-1"><img src="img/battle/IMT_Badge.png"> </div>
            <div class="col-md-2 text-center">
                <h2>Immortal Token</h2><button type="button" class="btn btn-success">Send</button></div>



            <div class="col-md-1"><img src="img/battle/300_Badge.png"> </div>
            <div class="col-md-2  text-center">
                <h2>300 Token</h2> <button type="button" class="btn btn-success">Send</button></div>
            <div class="col-md-1"><img src="img/battle/ATH_Badge.png"></div>
            <div class="col-md-2  text-center">
                <h2>Athenian Token</h2> <button type="button" class="btn btn-success">Send</button></div>

        </div>

        -->
        <div class="row">
            <div class="col-md-12 text-center">
                <div class="title"> Join Battle </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 text-center">
                <div class="thumbnail">
                    <img src="img/battle/IMT_Badge.png" alt="..." />
                    <div class="wrapper">
                        <div class="caption post-content">

                            <h2 id="totalIMT">30</h2>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3 text-center">
                <div class="thumbnail">
                    <img src="img/battle/PRS_Badge.png" alt="..." />
                    <div class="wrapper">
                        <div class="caption post-content">

                            <h2 id="totalPRS">280.0000</h2>

                        </div>
                    </div>
                </div>

            </div>

            <div class="col-sm-2 text-center"><br><br><br> <img src="img/battle/vs.png"> 
           


</div>
            <div class="col-sm-3 text-center"> <img src="img/battle/300_Badge.png">
                <h2 id="total300">180</h2>
            </div>
            <div class="col-sm-2 text-center"> <img src="img/battle/ATH_Badge.png">
                <h2 id="totalATH">19</h2>
            </div>
        </div>

        <div class="row text-centet">
            <div class="row">
                <div class="col-md-12 text-center title-footer">Battle End in</div>
            </div>

            <div id="clockdiv">
                <div>
                    <span class="days"></span>
                    <div class="smalltext">Days</div>
                </div>
                <div>
                    <span class="hours"></span>
                    <div class="smalltext">Hours</div>
                </div>
                <div>
                    <span class="minutes"></span>
                    <div class="smalltext">Minutes</div>
                </div>
                <div>
                    <span class="seconds"></span>
                    <div class="smalltext">Seconds</div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

	<script src='js/bignumber.js'></script>
	<script src="js/web3.js"></script>

    <script>
	
	  var Web3 = require('web3');
		var web3 = new Web3();
    web3.setProvider(new web3.providers.HttpProvider("https://testnet.infura.io"));

	var abi = [{"constant":true,"inputs":[],"name":"getGreeksBattlePoints","outputs":[{"name":"greeksBattlePoints","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MAX_ATHENIANS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_warriors","type":"uint256"}],"name":"assignAtheniansToBattle","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"immortals","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"deprecated","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getImmortalsOnTheBattlefield","outputs":[{"name":"immortalsOnTheBattlefield","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"newVersion","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"endTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_faction","type":"address"}],"name":"getTotalSlaves","outputs":[{"name":"slaves","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_warriors","type":"uint256"}],"name":"assignImmortalsToBattle","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"athenians","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BATTLE_POINT_DECIMALS","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getPersiansOnTheBattlefield","outputs":[{"name":"persiansOnTheBattlefield","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isInTime","outputs":[{"name":"inTime","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"WAD","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isInProgress","outputs":[{"name":"inProgress","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"redeemWarriors","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isTimeExpired","outputs":[{"name":"timeExpired","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BP_ATHENIAN","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"avarageBlockTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"persians","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getAtheniansOnTheBattlefield","outputs":[{"name":"atheniansOnTheBattlefield","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"warriorsOnTheBattlefield","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getGreeksBattlePointsBy","outputs":[{"name":"playerBattlePoints","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"},{"name":"_loosingMainTroops","type":"address"}],"name":"computeSlaves","outputs":[{"name":"slaves","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isEnded","outputs":[{"name":"ended","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"warriorsByPlayer","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_startTime","type":"uint256"},{"name":"life","type":"uint256"},{"name":"_avarageBlockTime","type":"uint8"}],"name":"setTime","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"spartans","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getPersiansBattlePoints","outputs":[{"name":"persiansBattlePoints","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getPersiansBattlePointsBy","outputs":[{"name":"playerBattlePoints","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_player","type":"address"}],"name":"getSpartansOnTheBattlefield","outputs":[{"name":"spartansOnTheBattlefield","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BATTLE_CASUALTIES","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MAX_PERSIANS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newVersion","type":"string"},{"name":"_newAddress","type":"address"}],"name":"setDeprecated","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"MAX_SPARTANS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getWinningFaction","outputs":[{"name":"winningFaction","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"newAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BP_PERSIAN","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MAX_IMMORTALS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BP_IMMORTAL","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BP_SPARTAN","outputs":[{"name":"","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_warriors","type":"uint256"}],"name":"assignSpartansToBattle","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isDraw","outputs":[{"name":"draw","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_warriors","type":"uint256"}],"name":"assignPersiansToBattle","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"VERSION","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_startTime","type":"uint256"},{"name":"_life","type":"uint256"},{"name":"_avarageBlockTime","type":"uint8"},{"name":"_persians","type":"address"},{"name":"_immortals","type":"address"},{"name":"_spartans","type":"address"},{"name":"_athenians","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":false,"name":"_faction","type":"address"},{"indexed":false,"name":"_battlePointsIncrementForecast","type":"uint256"}],"name":"WarriorsAssignedToBattlefield","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_faction","type":"address"},{"indexed":false,"name":"_survivedWarriors","type":"uint256"}],"name":"WarriorsBackToHome","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"value","type":"uint256"}],"name":"Debug","type":"event"}];
    // creation of contract object
var MyContract = web3.eth.contract(abi);

// initiate contract for an address
var myContractInstance = MyContract.at('0x12a0f29d4fe505f9426ad1ec82c19a335707e849');



$("#totalPRS").html(myContractInstance.getPersiansBattlePoints()).toString(10));
$("#total300").html(myContractInstance.getGreeksBattlePoints()).toString(10));

 function toFixed(x) {
        if (x.indexOf("e+") !== -1) {            
            var value = web3.toBigNumber(x);
            x = value.toString(10);
        }        
        return x;
    }
	
        function getTimeRemaining(endtime) {
            var t = Date.parse(endtime) - Date.parse(new Date());
            var seconds = Math.floor((t / 1000) % 60);
            var minutes = Math.floor((t / 1000 / 60) % 60);
            var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
            var days = Math.floor(t / (1000 * 60 * 60 * 24));
            return {
                'total': t,
                'days': days,
                'hours': hours,
                'minutes': minutes,
                'seconds': seconds
            };
        }

        function initializeClock(id, endtime) {
            var clock = document.getElementById(id);
            var daysSpan = clock.querySelector('.days');
            var hoursSpan = clock.querySelector('.hours');
            var minutesSpan = clock.querySelector('.minutes');
            var secondsSpan = clock.querySelector('.seconds');

            function updateClock() {
                var t = getTimeRemaining(endtime);

                daysSpan.innerHTML = t.days;
                hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
                minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
                secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

                if (t.total <= 0) {
                    clearInterval(timeinterval);
                }
            }

            updateClock();
            var timeinterval = setInterval(updateClock, 1000);
        }

        var deadline = new Date(Date.parse(new Date()) + 15 * 24 * 60 * 60 * 1000);
        initializeClock('clockdiv', deadline);

    </script>
</body>

</html>

